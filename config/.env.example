# LacyLights Environment Configuration
# Copy this file to /opt/lacylights/backend/.env and customize for your installation

# Database Configuration
# SQLite database file path (relative to backend directory)
DATABASE_URL="file:./prisma/lacylights.db"

# Server Configuration
# Port for the GraphQL API server
PORT=4000

# Node environment (production or development)
NODE_ENV=production

# DMX/Art-Net Configuration
# Enable Art-Net protocol for DMX lighting control
ARTNET_ENABLED=true

# Broadcast address for Art-Net packets (usually the network's broadcast address)
# For a 192.168.1.x network, this would be 192.168.1.255
ARTNET_BROADCAST=192.168.1.255

# Number of DMX universes to support (1-4 typical)
DMX_UNIVERSE_COUNT=4

# Art-Net refresh rate in Hz (typically 30-44 Hz)
ARTNET_REFRESH_RATE=40

# WiFi Configuration
# Enable WiFi configuration features (set to false to disable WiFi UI)
WIFI_ENABLED=true

# WiFi device name (usually wlan0 on Raspberry Pi)
WIFI_DEVICE=wlan0

# Logging Configuration
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Enable detailed query logging (useful for debugging)
LOG_QUERIES=false

# =============================================================================
# Authentication Configuration
# =============================================================================
# LacyLights supports two operating modes:
#
# Mode 1: No Authentication (AUTH_ENABLED=false) - DEFAULT
#   - All clients on the network have full access
#   - No login or device registration required
#   - Best for: isolated networks, single-user setups, development
#
# Mode 2: Device Authentication (AUTH_ENABLED=true)
#   - Devices must register and be approved by admin
#   - Approved devices have automatic access via fingerprint
#   - Admin can revoke devices at any time
#   - Best for: shared networks, multi-user environments, audit requirements
# =============================================================================

# Enable authentication (default: false for simplest setup)
AUTH_ENABLED=false

# Enable device-based authentication when AUTH_ENABLED=true
# Devices are identified by fingerprint and must be approved by admin
# Note: Only takes effect when AUTH_ENABLED=true
DEVICE_AUTH_ENABLED=true

# JWT secret for authentication tokens (required when AUTH_ENABLED=true)
# Generate with: openssl rand -base64 32
# JWT_SECRET=

# Default admin account (created on first startup when AUTH_ENABLED=true)
# DEFAULT_ADMIN_EMAIL=admin@lacylights.local
# DEFAULT_ADMIN_PASSWORD=
#
# SECURITY WARNING for DEFAULT_ADMIN_PASSWORD:
#   - This is a bootstrap password used to create the initial admin account on first startup
#   - The password is stored UNENCRYPTED in this file; the backend hashes it when creating the account
#   - The plaintext password remains in this file after initialization - consider clearing it after first login
#   - Ensure this file has strict permissions: chmod 600 /opt/lacylights/backend/.env
#   - Only the lacylights service user should be able to read this file
#   - Use a strong, unique password and rotate it if this file may have been exposed
#   - In high-security environments, consider using an external secrets manager

# CORS allowed origins (comma-separated)
# CORS_ORIGINS=http://localhost:3000,http://lacylights.local

# Frontend Configuration
# URL of the frontend application for CORS and redirects
FRONTEND_URL=http://lacylights.local

# Performance Configuration
# Maximum number of concurrent database connections
DATABASE_POOL_SIZE=10

# GraphQL playground (disable in production for security)
GRAPHQL_PLAYGROUND=false
